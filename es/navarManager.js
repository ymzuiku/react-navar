"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(a){for(var t,e=1,s=arguments.length;e<s;e++)for(var r in t=arguments[e])Object.prototype.hasOwnProperty.call(t,r)&&(a[r]=t[r]);return a}).apply(this,arguments)};exports.__esModule=!0;var React=require("react"),ANIMETIME=250,SINKRATE=.25,MOVETHRESHOLD=.15,STARTAREA=.48,defaultState={historys:[{index:0,beginTime:0,status:"static",from:{x:0,y:0,scale:1},now:{x:0,y:0,scale:1},to:{x:0,y:0,scale:1},path:"",transition:"all "+ANIMETIME/1e3+"s ease-out"}]},listenCache=new Set,isLock=!1;exports.navarManager={animeTime:ANIMETIME,sinkRate:SINKRATE,startArea:STARTAREA,moveThreshold:MOVETHRESHOLD,setState:function(){},state:__assign({},defaultState),ctx:React.createContext(__assign({},defaultState)),pop:function(a){if(a)return isLock=!1,exports.navarManager.state.historys.pop(),exports.navarManager.state.historys[exports.navarManager.state.historys.length-1]=__assign({},exports.navarManager.state.historys[exports.navarManager.state.historys.length-1],{beginTime:Date.now(),status:"static",from:{x:0,y:0,scale:1},now:{x:0,y:0,scale:1},to:{x:0,y:0,scale:1},transition:"all "+exports.navarManager.animeTime/1e3+"s ease-out"}),exports.navarManager.setState({historys:exports.navarManager.state.historys.slice()}),void listenCache.forEach(function(a){a(exports.navarManager.state)});isLock||(isLock=!0,exports.navarManager.state.historys[exports.navarManager.state.historys.length-1]=__assign({},exports.navarManager.state.historys[exports.navarManager.state.historys.length-1],{beginTime:Date.now(),status:"pop",from:{x:0,y:0,scale:1},now:{x:0,y:0,scale:1},to:{x:1,y:0,scale:1},transition:"all "+exports.navarManager.animeTime/1e3+"s ease-out"}),exports.navarManager.state.historys[exports.navarManager.state.historys.length-2]=__assign({},exports.navarManager.state.historys[exports.navarManager.state.historys.length-2],{beginTime:Date.now(),status:"sinkUp",from:{x:-exports.navarManager.sinkRate,y:0,scale:1},now:{x:0,y:0,scale:1},to:{x:0,y:0,scale:1},transition:"all "+exports.navarManager.animeTime/1e3+"s ease-out"}),exports.navarManager.setState({historys:exports.navarManager.state.historys.slice()}),setTimeout(function(){isLock=!1,exports.navarManager.state.historys.pop(),exports.navarManager.state.historys[exports.navarManager.state.historys.length-1]=__assign({},exports.navarManager.state.historys[exports.navarManager.state.historys.length-1],{beginTime:Date.now(),status:"static",from:{x:0,y:0,scale:1},now:{x:0,y:0,scale:1},to:{x:0,y:0,scale:1},transition:"all "+exports.navarManager.animeTime/1e3+"s ease-out"}),exports.navarManager.setState({historys:exports.navarManager.state.historys.slice()}),listenCache.forEach(function(a){a(exports.navarManager.state)})},exports.navarManager.animeTime))},push:function(a,t){if(exports.navarManager.state.historys.push({path:a,option:t,beginTime:Date.now(),status:"push",index:exports.navarManager.state.historys.length,from:{x:1,y:0,scale:1},now:{x:0,y:0,scale:1},to:{x:0,y:0,scale:1},transition:"all "+exports.navarManager.animeTime/1e3+"s ease-out"}),1<exports.navarManager.state.historys.length){var e=exports.navarManager.state.historys.length-2,s=exports.navarManager.state.historys[e];exports.navarManager.state.historys[e]=__assign({},s,{beginTime:Date.now(),status:"sinkDown",from:{x:0,y:0,scale:1},now:{x:0,y:0,scale:1},to:{x:-exports.navarManager.sinkRate,y:0,scale:1},transition:"all "+exports.navarManager.animeTime/1e3+"s ease-out"})}exports.navarManager.setState({historys:exports.navarManager.state.historys.slice()}),listenCache.forEach(function(a){a(exports.navarManager.state)}),setTimeout(function(){var a=exports.navarManager.state.historys.length-1,t=exports.navarManager.state.historys[a];exports.navarManager.state.historys[a]=__assign({},t,{beginTime:Date.now(),status:"static",from:{x:0,y:0,scale:1},now:{x:0,y:0,scale:1},to:{x:0,y:0,scale:1},transition:"all "+exports.navarManager.animeTime/1e3+"s ease-out"}),exports.navarManager.setState({historys:exports.navarManager.state.historys.slice()})},exports.navarManager.animeTime)},replace:function(){},listen:function(a){return listenCache.add(a),function(){listenCache.delete(a)}}};